<html>
    <head>
        <link rel="stylesheet" type="text/css" href="css/main.css">

        <script src="js/tween.umd.js"></script>
        <!-- script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script -->
    </head>
    <body>
        <header>
            <div class="logo-container">
                <img class="logo" src="content/Logo_Compact.png">
            </div>
            <nav>
                <ul>
                    <li >
                        <a href="#Splash">
                        Splash
                        </a>
                    </li>
                    <li>
                        <a href="#Portfolio">
                            Portfolio
                        </a>
                    </li>
                    <li>
                        <a href="#Services">
                            Services
                        </a>
                    </li>
                    <li>
                        <a href="#About">
                            About
                        </a>
                    </li>
                    <li>
                        <a>
                            Blog
                        </a>
                    </li>
                </ul>
            </nav>
        </header>

        <div class="content">
            <section id="Splash">
                <video class="content-bgvideo" id="vid-1" src="content/Gumbot.mp4" autoplay muted loop></video>
            </section>
            <section id="Portfolio">
                <video class="content-bgvideo"></video>
            </section>
            <section id="Services">
                <video class="content-bgvideo"></video>
            </section>
            <section id="About">
                <video class="content-bgvideo"></video>
            </section>
        </div>

        <!-- Scroll Tweening -->
        <script>
            var position = {y: 0};
            var autoScroll = false;

            var tween = new TWEEN.Tween(position, false) 
                .to({y: 0}, 500) 
                .easing(TWEEN.Easing.Cubic.Out) 
                .onUpdate(() => {
                    window.scrollTo(0, position.y);
                })
                .start() 

                document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                    anchor.addEventListener('click', function (e) {
                        position.y = window.scrollY;
                        autoScroll = true;
                        e.preventDefault();
                        var targetElement = document.querySelector(this.getAttribute('href'));

                        tween = new TWEEN.Tween(position, false) 
                            .to({y: targetElement.offsetTop}, 500) 
                            .easing(TWEEN.Easing.Cubic.Out) 
                            .onUpdate(() => {
                                window.scrollTo(0, position.y);
                            })
                            .start() 
                        });
            });

            function renderLoop(time) {
                window.requestAnimationFrame(renderLoop);
                if(autoScroll)
                    tween.update(time);
            }
            window.requestAnimationFrame(renderLoop);
        </script>

<div class="smoke"></div>

        <script>
            var smokeElements = document.querySelectorAll('.smoke');
            var smokeElementOriginalPositions = new Map();

            // Store the default positions of the Smoke Elements
            smokeElements.forEach(function(element) {
                    smokeElementOriginalPositions.set(element, new Map({x: element.style.left, y: element.style.top}))
                });

            // move them around
            function renderLoop(time) {
                smokeElements.forEach(function(element) {   
                    element.style.left = element.style.left + random(-500, 500);
                    element.style.top = element.style.top + random(-500, 500);

                    if(smokeElementOriginalPositions.has(element))
                    {
                        console.log(smokeElementOriginalPositions[element]);
                    }
                    element.style.left = lerp(element.style.left, smokeElementOriginalPositions[element].x, 0.25);
                    element.style.top = lerp(element.style.top, smokeElementOriginalPositions[element].y, 0.25);
                });
                
                window.requestAnimationFrame(renderLoop);
            }
            window.requestAnimationFrame(renderLoop);

            function random(min, max)
            {
                return Math.floor(Math.random() * (max - min) + min);
            }

            function lerp(a, b, t) {
                return a * (1 - t) + b * t;
            }
        </script>
    </body>
</html>